<!doctype html>
{% load static %}
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Habiter Invite</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- <link rel="manifest" href="site.webmanifest"> -->
    <!-- Place favicon.ico in the root directory -->

    <!-- CSS here -->
	<link rel="stylesheet" href="{% static "css/bootstrap.min.css" %}">
	<link rel="stylesheet" href="{% static "css/owl.carousel.min.css" %}">
	<link rel="stylesheet" href="{% static "css/magnific-popup.css" %}">
	<link rel="stylesheet" href="{% static "css/font-awesome.min.css" %}">
	<link rel="stylesheet" href="{% static "css/themify-icons.css" %}">
	<link rel="stylesheet" href="{% static "css/nice-select.css" %}">
	<link rel="stylesheet" href="{% static "css/flaticon.css" %}">
	<link rel="stylesheet" href="{% static "css/gijgo.css" %}">
	<link rel="stylesheet" href="{% static "css/animate.min.css" %}">
	<link rel="stylesheet" href="{% static "css/slick.css" %}">
	<link rel="stylesheet" href="{% static "css/slicknav.css" %}">
	<link rel="stylesheet" href="{% static "css/style.css" %}">
	<style>
	.hacky_img_shadow{
		box-shadow: #2e2e2e 1px 1px 40px;
		border-radius: 60px;
	}
	.white_link{
		color: white;
		font-weight: bold;
	}
	</style>
    <!-- <link rel="stylesheet" href="css/responsive.css"> -->
	<script>

//SEGMENT ANALYTICS
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t,e){var n=document.createElement("script");n.type="text/javascript";n.async=!0;n.src="https://cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a);analytics._loadOptions=e};analytics.SNIPPET_VERSION="4.1.0";
  analytics.load("NFj8y6xu7WHhL2eNjQCHhXSXpSCQY9h9");
  analytics.page();
  }}();

function openAppShare(eventID){
  console.log("openAppShare");
  console.log(eventID);
  const redirectURL = `habiter://main/appointment/${eventID}`;
  console.log(redirectURL);
  document.location = redirectURL;
  setTimeout(function(){
    if(confirm('Download Habiter to join the event.')){
      document.location = 'https://play.google.com/store/apps/details?id=com.habiter.habiter';
    }
  }, 300);
}

function openAppInvite(eventID, inviterID){
  console.log("openAppInvite");
  console.log(eventID);
  const redirectURL = `habiter://main/appointment/${eventID}-${inviterID}`;
  console.log(redirectURL);
  document.location = redirectURL;
  setTimeout(function(){
    if(confirm('Download Habiter from Google App store')){
      document.location = 'https://play.google.com/store/apps/details?id=com.habiter.habiter';
    }
  }, 300);
}

function openLink(eventID, inviterID){
	console.log("openLink");
	analytics.track("OpenLinkClick", {
		eventID: "{{eventID}}",
		appointmentID: "{{appointmentID}}"
	})
	if(!inviterID || inviterID === 'None' || inviterID === 'no ID provided'){
		openAppShare(eventID);
	}
	else{
		openAppInvite(eventID, inviterID);
	}
}

analytics.track("InviteOpen", {
	eventID: "{{eventID}}",
	appointmentID: "{{appointmentID}}"
})
	</script>
</head>
<body>
	<div class="container" style="margin-top:-000px">
       <div class="row align-items-center">
           <div class="col-xl-12 col-md-12" style="text-align: center;padding: 30px;">
			   <div>
				<img style="width:40%;" src="{% static "habiter.png" %}"/>
				<div>
				<p>{{pitch|safe}}</p>
				<a 
					class="boxed-btn3"
					style="background-color:#5a60b6;font-size: 50px;background-color:#5a60b6;width: 80%;margin: 30px;"
					href="#" 
					onclick="openLink('{{eventID}}', '{{inviterID}}')">Join event</a>
				</div>
			   </div>
				<div style="padding-top:40px">
					<a href="/"> Tell me more about Habiter </a>
					<p>{{footer}}</p>
				</div>
		   </div>
	   </div>
	</div>
</body>
</html>
